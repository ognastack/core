########################################
# NETWORK & BINDING
########################################

# Bind only to Docker internal interface or localhost.
# If you are using Docker network only (other services talk via service name, not host IP),
# you might bind to the internal network interface only, or use 0.0.0.0 if Docker network isolates access.
bind 0.0.0.0

# Disable protected mode if you have other protections (but often keep it on)
protected-mode yes

# Listen on default port
port 6379

########################################
# AUTHENTICATION / ACL
########################################

# Disable the default user (Redis 6+)
# user default off

# Create your own user with strong password and minimal permissions
# Example: user myapp on >StrongRandomPassword ~* &* +@all
# Note: generate a long random password!
# user myapp on >YOUR_GENERATED_PASSWORD ~* &* +@all

########################################
# SECURITY / MEMORY / TIMEOUTS
########################################

# Set a hard memory limit to reduce risk of DoS
# maxmemory 2gb
# maxmemory-policy allkeys-lru

# Timeout idle connections
timeout 300

########################################
# PERSISTENCE
########################################

# Enable both snapshotting and AOF if you like durability
save 900 1
save 300 10
save 60 10000

#appendonly yes
#appendfsync everysec

# Ensure the directory is locked down via Docker volume and permissions

########################################
# SLOW LOG
########################################

#slowlog-log-slower-than 10000
#slowlog-max-len 128

########################################
# LOGGING
########################################

# Example: Redirect logfile
# logfile "/var/log/redis/redis-server.log"

########################################
# TLS – if you want encrypted communication
########################################

# If you have generated TLS certs for container access:
# port 0                         # disable non-tls port
# tls-port 6379
# tls-cert-file /etc/redis/tls/redis.crt
# tls-key-file /etc/redis/tls/redis.key
# tls-ca-cert-file /etc/redis/tls/ca.crt
# tls-auth-clients yes          # if you want client certs (mutual TLS)

########################################
# REPLICATION / CLUSTER – if relevant
########################################

# replicaof <master_host> <master_port>

########################################
# COMMAND RENAMING or DISABLING – use ACLs instead
########################################

# Avoid renaming commands unless necessary. Better to use ACLs.